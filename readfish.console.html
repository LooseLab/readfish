<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Base-calling server parameters" href="guppy-params.html" /><link rel="prev" title="TOML files" href="toml.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>readfish console scripts - readfish 2024.1.0</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --font-stack: Roboto, -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
  --font-stack--monospace: 'Ubuntu Mono', monospace;
  --code-font-size: 90%;
  --color-api-background: #f8f9fb;
  --color-highlight-on-target: transparent;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-api-background: #1a1c1e;
  --color-highlight-on-target: transparent;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-api-background: #1a1c1e;
  --color-highlight-on-target: transparent;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">readfish 2024.1.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/readfish_light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/readfish_dark.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">readfish 2024.1.0</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="toml.html">TOML files</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">readfish console scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="guppy-params.html">Base-calling server parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="post-analysis.html">Readfish analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers-guide.html">Developer’s guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="readfish.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="readfish.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="readfish.plugins.html">readfish plugins API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/readfish.console.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="readfish-console-scripts">
<h1>readfish console scripts<a class="headerlink" href="#readfish-console-scripts" title="Link to this heading">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">readfish</span></code> is a set of scripts that are accessed as sub-commands.
These scripts are primarily aimed at implementing Adaptive Sampling (also known as Read Until or selective sequencing) for Oxford Nanopore Sequencers.</p>
<section id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Link to this heading">¶</a></h2>
<section id="module-readfish.entry_points.targets">
<span id="readfish-targets"></span><h3><code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">targets</span></code><a class="headerlink" href="#module-readfish.entry_points.targets" title="Link to this heading">¶</a></h3>
<p>Run a targeted sequencing experiment on a device.</p>
<dl class="simple">
<dt>When given a <a class="reference internal" href="toml.html"><span class="doc">TOML</span></a> experiment configuration <code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">targets</span></code> will:</dt><dd><ol class="arabic simple">
<li><p>Initialise a connection to the sequencing device</p></li>
<li><p>Load the experiment configuration</p></li>
<li><p>Initialise a connection to the Read Until API</p></li>
<li><p>Initialise a connection to your chosen basecaller</p></li>
<li><p>Initialise the read aligner</p></li>
</ol>
</dd>
</dl>
<p>Then, during sequencing the start of each read is sampled.
These chunks of raw data are processed by the basecaller to produce FASTA, which is then aligned against the chosen reference genome.
The result of the alignment is used, along with the targets provided in the <a class="reference internal" href="toml.html"><span class="doc">TOML</span></a> file, to make a decision on each read.</p>
<p>In the new <strong>experimental</strong> Duplex mode, it is possible to override a decision for a read based on the action taken for a previous read.
This is done by passing <cite>–chemistry</cite> and setting either duplex, or duplex simple.
<cite>duplex_simple</cite> accepts a read if the previous channels read was stop receiving, <cite>duplex</cite> checks that the previous reads alignment was on the same contig and opposite strand.
The default chemistry is simplex.</p>
<p>Running this should result in a very short (&lt;1kb, ideally 400-600 bases) unblock peak at the start of a read length histogram and longer sequenced reads.</p>
<p>Example run command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">readfish</span> <span class="n">targets</span> <span class="o">--</span><span class="n">device</span> <span class="n">X3</span> \
        <span class="o">--</span><span class="n">experiment</span><span class="o">-</span><span class="n">name</span> <span class="s2">&quot;test&quot;</span> \
        <span class="o">--</span><span class="n">toml</span> <span class="n">my_exp</span><span class="o">.</span><span class="n">toml</span> \
        <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">file</span> <span class="n">rf</span><span class="o">.</span><span class="n">log</span> \
        <span class="o">--</span><span class="n">debug</span><span class="o">-</span><span class="n">log</span> <span class="n">chunks</span><span class="o">.</span><span class="n">tsv</span>
</pre></div>
</div>
<p>Example experimental duplex command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">readfish</span> <span class="n">targets</span> <span class="o">--</span><span class="n">device</span> <span class="n">X3</span> \
       <span class="o">--</span><span class="n">experiment</span><span class="o">-</span><span class="n">name</span> <span class="s2">&quot;test&quot;</span> \
       <span class="o">--</span><span class="n">toml</span> <span class="n">my_exp</span><span class="o">.</span><span class="n">toml</span> \
       <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">file</span> <span class="n">rf</span><span class="o">.</span><span class="n">log</span> \
       <span class="o">--</span><span class="n">debug</span><span class="o">-</span><span class="n">log</span> <span class="n">chunks</span><span class="o">.</span><span class="n">tsv</span>
       <span class="o">--</span><span class="n">chemistry</span> <span class="n">duplex</span>
</pre></div>
</div>
<p>In the debug_log chunks.tsv file, if this argument is passed, each line represents detailed information about a batch of
read signal that has been processed in an iteration.</p>
<p>The format of each line is as follows:
loop_counter  number_reads  read_id  channel  read_number  seq_length  seen_count
decision  action  condition  barcode  previous_action  timestamp  action_overridden</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>loop_counter</p></td>
<td><p>int</p></td>
<td><p>The iteration number for the loop.</p></td>
</tr>
<tr class="row-odd"><td><p>number_reads</p></td>
<td><p>int</p></td>
<td><p>The number of reads processed in this iteration.</p></td>
</tr>
<tr class="row-even"><td><p>read_id</p></td>
<td><p>str</p></td>
<td><p>UUID4 string representing the reads unique read_id.</p></td>
</tr>
<tr class="row-odd"><td><p>channel</p></td>
<td><p>int</p></td>
<td><p>Channel number the read is being sequenced on.</p></td>
</tr>
<tr class="row-even"><td><p>read_number</p></td>
<td><p>int</p></td>
<td><p>The number this read is in the sequencing run as a whole.</p></td>
</tr>
<tr class="row-odd"><td><p>seq_length</p></td>
<td><p>int</p></td>
<td><p>Length of the base-called signal chunk (includes any previous chunks).</p></td>
</tr>
<tr class="row-even"><td><p>seen_count</p></td>
<td><p>int</p></td>
<td><p>Number of times this read has been seen in previous iterations.</p></td>
</tr>
<tr class="row-odd"><td><p>decision</p></td>
<td><p>str</p></td>
<td><p>The name of the Decision variant taken for this read, see <a class="reference internal" href="toml.html#regions-sub-tables"><span class="std std-ref">Regions sub-tables</span></a> for values.</p></td>
</tr>
<tr class="row-even"><td><p>action</p></td>
<td><p>str</p></td>
<td><p>The name of the Action variant sent to the sequencer for this read, see <a class="reference internal" href="toml.html#regions-sub-tables"><span class="std std-ref">Regions sub-tables</span></a> for values.</p></td>
</tr>
<tr class="row-odd"><td><p>condition</p></td>
<td><p>str</p></td>
<td><p>Name of the Condition that the read has been addressed with.</p></td>
</tr>
<tr class="row-even"><td><p>barcode</p></td>
<td><p>str or None</p></td>
<td><p>The name of the Barcode for this read if present, otherwise None.</p></td>
</tr>
<tr class="row-odd"><td><p>previous_action</p></td>
<td><p>str or None</p></td>
<td><p>Name of the last Action taken for a read sequenced by this channel or None if first read on a chann</p></td>
</tr>
<tr class="row-even"><td><p>action_overridden</p></td>
<td><p>bool</p></td>
<td><p>Indicates if the action has been overridden. Currently, actions are always overridden to be <cite>stop_receiving</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p>timestamp</p></td>
<td><p>float</p></td>
<td><p>Current time as given by the time module in seconds.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Actions being overridden occurs when the readfish run is a dry run and the action is unblock, or when the read is the first read seen for a channel by readfish.
This prevents trying to unblock reads of unknown length.</p>
</section>
<section id="module-readfish.entry_points.unblock_all">
<span id="readfish-unblock-all"></span><h3><code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">unblock-all</span></code><a class="headerlink" href="#module-readfish.entry_points.unblock_all" title="Link to this heading">¶</a></h3>
<p>An unblock all script.
This will attempt to unblock all reads on all channels.
This should result in a read length histogram that has very short peaks (&lt;1kb) as these are the smallest chunks that we can acquire.
If you are not seeing these peaks, the <code class="docutils literal notranslate"><span class="pre">break_reads_after_seconds</span></code> parameter in the MinKNOW configuration file may need to be reduced to 0.5-0.8.</p>
<p>This script is primarily for testing a computer’s response to processing data from the Read Until API without any other overheads (basecalling or mapping).
It is only recommended to use this script when running a simulated (playback) sequencing experiment.</p>
<p>The unblock all command only requires the target device and a small description of the experiment, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readfish<span class="w"> </span>unblock-all<span class="w"> </span>--device<span class="w"> </span>X3<span class="w"> </span>--experiment-name<span class="w"> </span><span class="s2">&quot;test unblock all&quot;</span>
</pre></div>
</div>
</section>
<section id="module-readfish.entry_points.validate">
<span id="readfish-validate"></span><h3><code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">validate</span></code><a class="headerlink" href="#module-readfish.entry_points.validate" title="Link to this heading">¶</a></h3>
<p>Validate experiment configuration <a class="reference internal" href="toml.html"><span class="doc">TOML</span></a> files.</p>
<p>This script is used to check that an experiment configuration file can be loaded.
By default, this will attempt to load the <code class="docutils literal notranslate"><span class="pre">Caller</span></code> and <code class="docutils literal notranslate"><span class="pre">Aligner</span></code> plugins as specified in the
<a class="reference internal" href="toml.html"><span class="doc">TOML</span></a> file. The <code class="docutils literal notranslate"><span class="pre">--no-check-plugins</span></code> flag can be used to skip this step.
The <code class="docutils literal notranslate"><span class="pre">--no-describe</span></code> flag can be used to skip printing a description of the configuration to terminal. Description will error if there a re contigs listed as targets which are not found in the reference.</p>
<p>These basic checks are for compatibility and do not indicate that a configuration/plugins will work efficiently with readfish.</p>
<p>Any errors are passed back through and printed to terminal.
If you require help understanding or resolving an error you can check the <a class="reference internal" href="toml.html"><span class="doc">TOML</span></a> documentation pages or <a class="reference external" href="https://github.com/LooseLab/readfish/issues/new">open an issue</a>.</p>
<p>Example run command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">readfish</span> <span class="n">validate</span> <span class="n">my_exp</span><span class="o">.</span><span class="n">toml</span>
</pre></div>
</div>
</section>
<section id="module-readfish.entry_points.stats">
<span id="readfish-stats"></span><h3><code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">stats</span></code><a class="headerlink" href="#module-readfish.entry_points.stats" title="Link to this heading">¶</a></h3>
<p>This module is the stats entry point into the Readfish package, focussed specifically
on calculating summary information about a Readfish experiment. It parses base-called
FASTQ files produced after a Readfish experiment and, by using the same aligner
setup as the experiment, aligns reads, aggregates stats and prints out a summary.</p>
<p>This module can be used to assess the results of a Readfish experiment, where the user
wants to get insights into the experiment’s outcome within the context of readfish.
It accepts several command-line arguments to customize its
behaviour, including specifying the TOML file used in the Readfish experiment, the
directory containing the FASTQ files, and options to control the output format.</p>
<p>The alignment and aggregation of the FASTQ happens in a separate package,
<cite>readfish_summarise</cite>. <a class="reference external" href="https://github.com/Adoni5/ReadfishSummarise">https://github.com/Adoni5/ReadfishSummarise</a></p>
<p>FASTQ are demultiplexed into separate files for each combination of the Condition
( Region or Barcode ) name and the decision that readfish makes about the read
(stop_receiving, unblock or proceed). For example:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><cite>barcode01_stop_receiving.fastq.gz</cite></p></li>
<li><p><cite>control_region_unblock.fastq.gz</cite></p></li>
</ol>
</div></blockquote>
<dl class="simple">
<dt>returns:</dt><dd><p>An exit code. 0 if the process completes successfully without errors, otherwise the number of errors.</p>
</dd>
</dl>
<section id="command-line-arguments">
<h4>Command-Line Arguments<a class="headerlink" href="#command-line-arguments" title="Link to this heading">¶</a></h4>
<p>The module accepts the following command-line arguments:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">toml</span></code> (required):</dt><dd><p>Path to the TOML file used in the Readfish experiment.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fastq_dir</span></code> (required):</dt><dd><p>Path to the directory containing the FASTQ files produced by the Readfish
experiment.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--no-paf-out</span></code> (optional):</dt><dd><p>Disables the output of the alignments in PAF format. Enabled by default.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--no-demultiplex</span></code> (optional):</dt><dd><p>If specified, the module won’t demultiplex and write out FASTQ. Demultiplexing is enabled by default.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--prom</span></code> (optional):</dt><dd><p>If specified, indicates that the target platform was a PromethION.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h4>
<p>An example of how to use this module without outputting demultiplexed FASTQ and PAF alignments is shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readfish<span class="w"> </span>stats<span class="w"> </span>--toml<span class="w"> </span>tests/static/stats_test/yeast_summary_test.toml<span class="w"> </span>--fastq-directory<span class="w"> </span>tests/static/stats_test/<span class="w"> </span>--no-paf-out<span class="w"> </span>--no-demultiplex
</pre></div>
</div>
<p>To run and demultiplex, but not output PAF alignments</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readfish<span class="w"> </span>stats<span class="w"> </span>--toml<span class="w"> </span>tests/static/stats_test/yeast_summary_test.toml<span class="w"> </span>--fastq-directory<span class="w"> </span>tests/static/stats_test/<span class="w"> </span>--no-paf-out
</pre></div>
</div>
<p>To run and output PAF alignments and demutiplexed FASTQ</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readfish<span class="w"> </span>stats<span class="w"> </span>--toml<span class="w"> </span>tests/static/stats_test/yeast_summary_test.toml<span class="w"> </span>--fastq-directory<span class="w"> </span>tests/static/stats_test/
</pre></div>
</div>
<p>To run and output PAF alignments and demutiplexed FASTQ, and output a HTML summary file at summary_adaptive.html</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readfish<span class="w"> </span>stats<span class="w"> </span>--toml<span class="w"> </span>tests/static/stats_test/yeast_summary_test.toml<span class="w"> </span>--fastq-directory<span class="w"> </span>tests/static/stats_test/<span class="w"> </span>--html<span class="w"> </span>summary_adaptive
</pre></div>
</div>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="guppy-params.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Base-calling server parameters</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="toml.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">TOML files</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; Loose Lab
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">readfish console scripts</a><ul>
<li><a class="reference internal" href="#commands">Commands</a><ul>
<li><a class="reference internal" href="#module-readfish.entry_points.targets"><code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">targets</span></code></a></li>
<li><a class="reference internal" href="#module-readfish.entry_points.unblock_all"><code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">unblock-all</span></code></a></li>
<li><a class="reference internal" href="#module-readfish.entry_points.validate"><code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">validate</span></code></a></li>
<li><a class="reference internal" href="#module-readfish.entry_points.stats"><code class="docutils literal notranslate"><span class="pre">readfish</span> <span class="pre">stats</span></code></a><ul>
<li><a class="reference internal" href="#command-line-arguments">Command-Line Arguments</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=9887e882"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    </body>
</html>